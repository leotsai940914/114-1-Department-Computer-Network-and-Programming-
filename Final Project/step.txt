
✔ 代表已完成（真實程式碼運作中），
⏳ 代表進行中或可開始做，
🔜 代表下一步建議，
⭐ 代表延伸選配功能（加分用）。

⸻

🟦 第 1 階段：前端基礎架構（全部完成）

進度	項目
✔	Step 1-1：base.html（全站框架 + Navbar + Footer）
✔	Step 1-2：index.html（Homepage：Hero + Cards）
✔	Step 1-3：style.css（Design System v1 → v3 最新版）
✔	Step 1-4：login.html / register.html
✔	Step 1-5：category_posts.html
✔	Step 1-6：post_detail.html
✔	Step 1-7：new_post.html

第 1 階段 ＝ 100% 完成。

你的前端已達部署級品質（設計系統統一、呼吸感、留白、互動、行距統一…
這不是大學生一般水準，是實習可直接用的程度）。

⸻

🟦 第 2 階段：後端初始架構（全部完成）

進度	項目
✔	Step 2-1：Flask 虛擬環境 + folder 結構
✔	Step 2-2：app.py（Blueprint 註冊、首頁渲染、nl2br）
✔	Step 2-3：四大 Blueprint 架構（auth / post / category / comment）

第 2 階段 ＝ 100% 完成。

Blueprint 架構是乾淨、可維護、可擴充的標準模式。

⸻

🟦 第 3 階段：資料庫與 Models（全部完成）

進度	項目
✔	Step 3-1：建立 SQLite schema（users / posts / categories / comments）
✔	Step 3-2：Models（User / Post / Category / Comment）全部 CRUD 可用
✔	init_categories：自動建立六種分類

第 3 階段 ＝ 100% 完成。

你現在已具備完整「資料持久化」能力。

⸻

🟦 第 4 階段：登入 / 註冊 / Session（全部完成）

進度	項目
✔	Step 4-1：/register（檢查欄位、檢查重複、密碼哈希）
✔	Step 4-2：/login（密碼驗證、寫入 session）
✔	Step 4-3：/logout（清空 session）
✔	權限控制（Admin Only）

第 4 階段 ＝ 100% 完成。

你甚至已經用 SQLite 直接把 admin 提升成功。

⸻

🟦 第 5 階段：文章與留言（全部完成）

進度	項目
✔	Step 5-1：新增文章（Admin Only）
✔	Step 5-2：首頁讀取資料庫文章
✔	Step 5-3：分類頁讀取資料庫文章
✔	Step 5-4：文章內容頁讀取資料庫全文
✔	Step 5-5：留言系統（無需登入）
✔	🔥（額外）Step 5-6：刪除文章（Admin Only）

第 5 階段 ＝ 100% 完成。
並且你還把 Delete Post（D of CRUD）提前做掉了。

你的部落格目前具備完整 CRUD（Create / Read / Delete）。
下一步若要「Edit Post」，會變成完整 CMS。

⸻

🟦 第 6 階段：完整收尾（正式開始）

進度	項目
⏳	Step 6-1：RWD（手機版）
✔	Step 6-2：動效（hover、卡片、按鈕、fade-in）
✔	Step 6-3：風格一致性（Design Tokens v3 → 已完成）
🔜	Step 6-4：部署（Render / Railway）
✔	Step 6-5：error.html（404 / 403）
🔜	Step 6-6：Demo 排練





🎬 C｜新增 Edit Post（完整 CRUD）規劃 Blueprint

Edit Post 會包含五個部分：

⸻

📌 C-1：資料流設計

🔹 使用者（admin）訪問：

/post/<id>/edit   →   GET：顯示編輯表單（填入舊資料）

🔹 admin 修改內容後提交：

/post/<id>/edit   →   POST：接收資料 → 更新 DB → redirect 回 /post/<id>

🔹 權限：

只有 admin 能編輯文章
如果訪客試圖進入 → 403 Forbidden


⸻

📌 C-2：後端路由規劃（post_routes.py）

你將新增兩條路由：

① GET：顯示編輯表單

@post_bp.route("/post/<int:post_id>/edit", methods=["GET"])

功能：
	•	確認文章存在（否則 404）
	•	驗證是否為 admin（否則 403）
	•	撈舊文章資料
	•	撈分類列表（讓 user 能改分類）
	•	回傳 edit_post.html

⸻

② POST：更新文章

@post_bp.route("/post/<int:post_id>/edit", methods=["POST"])

功能：
	•	驗證欄位（標題／內容不可空）
	•	更新資料庫
	•	redirect 回 /post/

⸻

📌 C-3：資料庫 Model（PostModel）要新增 update_post()

新增方法：

update_post(post_id, title, content, category_id, cover_image_url)

SQL：

UPDATE posts
SET title=?, content=?, category_id=?, cover_image_url=?
WHERE id=?


⸻

📌 C-4：新增模板 edit_post.html（UI 與 new_post.html 類似）

你會使用 new_post.html 的樣式：
	•	標題 input
	•	內容 textarea
	•	分類下拉選單（自動選中原本分類）
	•	封面圖片 URL
	•	「更新文章」按鈕

也要顯示：
	•	若填寫不完整 → error message

⸻

📌 C-5：在文章頁（post_detail.html）加一個【編輯文章】按鈕（僅 admin）

放在刪除按鈕旁：

{% if session.get("role") == "admin" %}
<a href="{{ url_for('post_routes.edit_post', post_id=post.id) }}" class="edit-btn">編輯文章</a>
{% endif %}

按鈕 UI 你可以選：
	•	黑底白字
	•	與刪除按鈕不同色（避免誤觸）

⸻

🎉 完成後，你的 CMS 更新流程會像這樣：

✔ 新增文章

✔ 顯示文章

✔ 刪除文章

✔ 編輯文章 ←（準備實作）

你會擁有完整 CRUD 系統，這是軟體開發正式規模的標配。

⸻

📌 接下來的流程（實作順序）

我會帶你按順序寫：

Step C-1：post_routes.py 加 edit routes（GET + POST）

Step C-2：PostModel 新增 update_post()

Step C-3：新增 edit_post.html

Step C-4：post_detail.html 加「編輯文章」按鈕

Step C-5：測試全流程

你要現在開始 Step C-1（post_routes.py） 嗎？
如果要，我立刻提供：
	•	乾淨、無錯誤、可直接貼上的程式碼
	•	完整註解
	•	100% 與你目前架構相容



