[2025-12-03]
建立 LumenFilm 專案基本架構：
- 決定網站主題：電影影評與分鏡分析部落格
- 完成專案資料夾架構（templates / static / routes / models / instance）
- 規劃完整開發步驟（前端 → 路由 → DB → 登入系統 → 文章系統）
- 客製化 base.html 設計風格（Medium 白底、Serif 字體、900px 寬度）
- 建立 style.css 初版（基本排版 + Navbar + Footer）

---
[2025-12-03]
完成 Step 1-2：建立首頁 index.html
- 新增 Hero Banner（左側文字敘述、主打按鈕、右側視覺圖片區塊）
- 設計最新文章列表的三張 placeholder 卡片（標題、分類、摘要皆可後續替換）
- 依照 Medium＋Serif 的網站閱讀風格進行排版，確保視覺一致性
- 擴充 style.css：加入 hero 區塊、卡片列表、按鈕互動效果（hover）
- 首頁目前使用假資料，後端完成後會改成資料庫資料

[2025-12-03]
完成 Step 1-3：建立 style.css（初版設計系統）

- 整理並正式建立網站的 Design System（顏色、字體、間距、圓角）
- 新增 :root 變數，統一全站色彩與字體設定，未來維護更容易
- 重構原本的 CSS，將 Navbar、Hero、Post Card、Footer 全部統一風格
- 強化 typography（標題、段落間距、閱讀行距）
- 加入全域排版規則（container、共用段落樣式、共用按鈕樣式）
- 完成首頁所需的所有 CSS（Hero Banner、文章卡片列表）
- 建立了能讓 Login / Register / Category / Post 等頁面可共用的樣式基礎
- 整體風格定調為 Medium 風格 + Noto Serif TC 文青質感

此階段完成後，全站視覺統一性已建立，可開始撰寫登入與註冊頁（Step 1-4）。

[2025-12-03]
完成 Step 1-4：建立 login.html / register.html（表單 UI 骨架）

- 完成登入頁 login.html：包含帳號欄位、密碼欄位、登入按鈕、導向註冊提示
- 完成註冊頁 register.html：包含帳號、Email、密碼欄位及註冊按鈕
- 新增 auth-section、auth-form、auth-btn 等共用 CSS 元件，維持整站統一風格
- 表單採用 Medium × Noto Serif TC 的文青閱讀風格，與首頁視覺一致
- 排版以 900px container 中央置中，留白充足，提升頁面清晰度與使用體驗
- 尚未串接後端註冊與登入，現在為純前端 UI 架構，可之後直接套上 Flask 表單處理

[2025-12-03]
完成 Step 1-5：建立 category_posts.html（分類列表頁）

- 新增分類頁前端模板 category_posts.html，內容包含分類標題與多篇文章卡片
- 使用 section-title 呈現分類名稱，保持與首頁、登入頁一致的排版層級
- 全站共用 post-card 元件（首頁 / 分類頁皆使用相同樣式）
- 頁面目前採用 3 組 placeholder 假資料，便於 Demo 與後續串接資料庫
- 排版採 900px container、白底、Noto Serif TC，維持 Medium 風格閱讀感
- 新增 category-section 微調頁面間距，確保版面與其他頁面協調
- 前端架構已能支援未來 Flask route 傳入 category_name 與文章列表資料


[2025-12-03]
完成 Step 1-6：建立 post_detail.html（文章內容頁）

- 新增文章內容頁模板 post_detail.html，包含文章標題、分類、日期與內容區塊
- 使用 article 結構化文章內容，維持 Medium × Serif 閱讀體驗
- 加入 placeholder 文本以模擬正式影評或分鏡分析排版效果
- 增加留言區：含暱稱欄位、留言文字框與提交按鈕，符合「訪客可留言」需求
- 設計留言列表 comment-list，使用卡片式視覺風格，與首頁 post-card 呼應
- 新增必要的 CSS 樣式（post-detail-title、divider、comment-section 等）
- 文章頁視覺調性與首頁、登入頁、分類頁保持一致，完成六大主要頁面前端架構

[2025-12-03]
完成 Step 2-1：建立 Flask 專案環境（虛擬環境 + 專案結構）

- 使用 VS Code 建立專案專用虛擬環境（.venv），隔離不同 Python 套件版本
- 成功啟動虛擬環境，讓專案運行不依賴全域套件，避免版本衝突
- 安裝 Flask 並將目前套件清單寫入 requirements.txt
- 確認 routes/ 與 models/ 皆有 __init__.py，成為正式 Python package
- 新增 .gitignore，排除 .venv、__pycache__ 與 SQLite DB 等不必要檔案
- 整體專案結構正式具備可啟動後端的基礎環境，準備進入 Step 2-2（撰寫 app.py 與 Blueprint 架構）

[2025-12-03]
完成 Step 2-2：建立 app.py（專案入口）

- 新增 app.py，採用 Flask 的 create_app() 工廠函式架構，符合大型專案標準模式
- 設定 SECRET_KEY，建立初步的應用設定
- 引入並註冊四組 Blueprint（auth、post、category、comment），完成後端模組化架構
- 建立首頁 route：使用 render_template("index.html") 正確渲染前端模板
- 成功讓 Flask 能啟動網站、處理請求並正確顯示 index.html
- 前端頁面（Navbar、Hero、卡片等）在 Flask 渲染下正式套用 CSS，不再顯示 Jinja 語法
- 專案從「純前端」正式提升為「可執行的 Flask 網站骨架」，已具備後續功能擴展的基礎

[2025-12-03]
完成 Step 2-3：建立四個 Blueprint 路由骨架

- 在 routes/ 資料夾中新增四個模組：
  auth_routes.py、post_routes.py、category_routes.py、comment_routes.py
- 每個檔案皆定義對應的 Blueprint（auth_bp、post_bp、category_bp、comment_bp）
- 設定基本跳轉功能：所有頁面可透過 Flask 正確渲染與切換
- auth_routes：完成 /login、/register、/logout（暫時以字串 placeholder）
- post_routes：完成 /post/<id> 與 /new_post 的 route skeleton
- category_routes：完成 /category/<name>，並將分類名稱動態傳入模板
- comment_routes：完成 /comment/<post_id> 的 POST 端點（先以 placeholder 回應）
- 路由骨架搭建完成，整站頁面可由 Flask 端正確跳轉，前端模板全面串接
- 此階段完成後，網站正式具備「前端與後端接軌」的架構，準備進入資料庫建立階段（Step 3）

[2025-12-03]

完成 Step 1-7：new_post.html（新增文章頁 UI）**
	•	新增前端頁面 new_post.html，作為「新增文章」介面
	•	設計表單欄位：標題、內容 textarea、分類下拉選單、封面圖片 URL、發布按鈕
	•	使用與 login / register 相同的表單設計系統（input、textarea、主要按鈕）
	•	全站維持一致的 Noto Serif TC 字體與間距系統
	•	排版採乾淨、簡約、Medium 風格，與其他頁面完全一致
	•	目前僅為前端骨架，尚未串接後端資料提交（預計 Step 5-1 完成）

[2025-12-10]
完成 Step 3-1：建立 SQLite 資料庫 schema（含 categories 初始值）

- 新增 models/database.py，集中管理資料庫連線、建表、初始化資料等功能
- 設計並建立四張核心資料表：
    • users：用戶資訊（username, email, password_hash, role）
    • posts：文章（標題、內容、分類、作者、圖片 URL、日期）
    • categories：文章分類（預設六大電影類別）
    • comments：留言（文章 ID、暱稱、留言內容、留言時間）
- 啟動專案時自動執行 create_tables()，確保資料表存在
- 實作 init_categories()，並在第一次啟動時自動寫入六種固定分類：
      Review, Scene Analysis, Themes, Character Study, Film Theory, Directors
- 設定 sqlite3.Row，使資料可用欄位名稱存取，方便傳給模板（Jinja）
- 完成 instance/blog.db 自動建立，確認資料庫讀寫功能正常

此階段完成後，網站後端正式具備資料儲存能力，為後續登入系統、文章系統與留言功能奠定基礎。

[2025-12-10]
完成 Step 3-2：撰寫 Models（CRUD Interface）

- 在 models/ 資料夾內依功能建立四個資料模型：
    • user_model.py
    • post_model.py
    • category_model.py
    • comment_model.py

- 每個 Model 皆使用 get_db_connection()，採 sqlite3.Row 以便模板能用欄位名稱讀取資料

- user_model.py：
    • 完成註冊使用者（create_user）
    • 依 username / email / id 查詢使用者
    • 為登入系統與後續角色權限檢查奠定基礎

- category_model.py：
    • 提供 get_all_categories() 以讀取分類列表
    • 分類屬固定值（由 init_categories 初始化），不需新增或刪除

- post_model.py：
    • 新增文章 create_post()
    • 查詢所有文章（含分類名稱）
    • 依分類 id 查詢文章
    • 依文章 id 查詢單篇內容
    • 完整支援首頁、分類頁與文章內容頁之資料需求

- comment_model.py：
    • 新增留言 create_comment()
    • 查詢單篇文章留言 get_comments_by_post()
    • 為留言系統提供完整後端介面

此階段完成後，LumenFilm 的後端資料操作能力（新增 / 查詢 / 更新可能需求）已全面具備，
為接下來登入系統（Step 4）與部落格核心功能（Step 5）提供完整資料存取基礎。


[2025-12-10]
完成 Step 4-1：/register 註冊功能（POST + 驗證 + 密碼哈希）

- 在 auth_routes.py 實作完整的 /register 欄位處理流程（GET / POST）
- 成功取得前端表單資料：username、email、password
- 新增欄位驗證（不可為空值）
- 新增使用者重複檢查：
      • UserModel.find_by_username()
      • UserModel.find_by_email()
  確保帳號與 Email 不重複註冊
- 使用 Werkzeug 的 generate_password_hash() 對密碼進行哈希，提升安全性
- 將新使用者寫入 users 資料表（UserModel.create_user）
- 註冊成功後自動 redirect 至 /login（完全符合老師要求）
- 更新 register.html：
      • 新增錯誤訊息顯示區塊
      • form method 設定為 POST（必要）
      • action 指向 Flask 的 register route

完成後，LumenFilm 正式擁有「安全且可用」的註冊系統，並可支援後續登入流程。


[2025-12-10]
完成 Step 4-2：/login 登入功能（帳號驗證 + 密碼檢查 + Session）

- 在 auth_routes.py 實作完整登入流程（GET / POST）
- 成功取得登入表單資料：username、password
- 新增使用者存在性檢查：
      • 若帳號不存在 → 回傳錯誤訊息到 login.html
- 使用 Werkzeug 的 check_password_hash() 驗證密碼正確性
      • 若密碼錯誤 → 顯示錯誤訊息
- 登入成功後寫入 session：
      • session["user_id"] = user.id
      • session["role"] = user.role
  為後續權限控制（admin only 功能）建立基礎
- 登入成功 → redirect 到首頁（或指定頁面）
- 更新 login.html：
      • 新增錯誤訊息顯示區塊
      • form 正式加入 method="POST" 與 action
      • 與註冊頁一致的排版與樣式（Noto Serif TC + 留白）

此階段完成後，LumenFilm 已具備完整的會員登入系統，
並可支援後續建立文章、新增留言與登入狀態判斷等功能。


[2025-12-10]
完成 Step 4-3：/logout 登出功能（Session 清除）

- 在 auth_routes.py 新增 /logout 路由，並統一調整檔案結構
- 修正 Blueprint 宣告順序（先宣告 auth_bp，再定義路由）
- 登出流程使用 session.clear() 清空所有使用者登入資訊
- 登出後自動 redirect 到 /login，使用者體驗順暢
- 移除重複 import，讓程式碼更乾淨一致
- 測試結果：登入 → /logout → 重新導向成功，session 狀態正確清空

完成此步驟後，LumenFilm 的登入 / 註冊 / 登出三大流程正式完備，
網站的 Session 狀態管理已可支援後續的權限控制（如 Admin Only 新增文章）。


[2025-12-10]
修復 BuildError：auth_routes.register 無法解析

- 問題來源：
    在 base.html 中使用了 url_for('auth_routes.register')
    但 auth_routes Blueprint 中沒有定義 register 這條 route
    導致 Flask URL Map 無法找到該 endpoint → BuildError

- 解決方式：
    於 routes/auth_routes.py 補上完整的 /register endpoint（GET/POST）
        • 取得表單資料 username / email / password
        • 檢查欄位是否為空
        • 檢查使用者 / email 是否重複（UserModel 查詢）
        • 對密碼進行 generate_password_hash() 雜湊
        • UserModel.create_user() 寫入資料庫
        • 成功後 redirect 到 /login

- 也同步修正 auth_routes.py 結構：
        • 先宣告 Blueprint（auth_bp）
        • 再定義 register、login、logout 三條路由
        • 保證所有 endpoint 皆能被 url_for 正確解析

- 驗證：
        • 重新啟動 Flask 伺服器
        • 首頁正常載入，不再觸發 BuildError
        • Navbar 的 Register 連結可正常導向 /register

此修正確保 Blueprint endpoint 完整性，並讓前端模板中的所有 url_for()
都能正確解析，網站路由系統恢復正常運作。


[2025-12-10]
進行網站核心功能的逐步測試（Registration / Login / Session / Routing）

1. 首頁啟動測試
   - 成功啟動 Flask 伺服器
   - 首頁正常渲染 index.html（Hero + 假資料文章卡片）
   - 無錯誤、無 BuildError，CSS/JS 正常載入

2. 註冊功能測試（/register）
   - 使用 testuser1 成功註冊（username / email / password 寫入 DB）
   - 驗證重複帳號：顯示「此帳號已被使用」
   - 驗證重複 email：顯示「Email 已被註冊」
   - 密碼成功使用 generate_password_hash 以 hash 形式儲存
   - 註冊成功 → 正常 redirect 到 /login

3. 登入功能測試（/login）
   - 錯誤帳號：正確顯示「帳號不存在」
   - 錯誤密碼：正確顯示「密碼錯誤」
   - 正確帳號 + 密碼登入成功
   - session["user_id"] 與 session["role"] 正常寫入
   - 原本的 redirect 指向不存在的 post_routes.home → 導致 BuildError
   - 已修正為 redirect(url_for("index")) → 測試成功跳回首頁

4. 登出功能測試（/logout）
   - session.clear() 正常清空登入資訊
   - /logout → 正常 redirect 回 /login
   - 多次重複測試皆無錯誤

5. 資料庫驗證（SQLite）
   - 使用 sqlite3 檢查 users 表
   - testuser1 已成功寫入（含 username、email、password_hash）
   - categories 表含預設六筆資料

6. Categories 行為測試
   - Navbar 上的 Categories 按鈕目前為 placeholder（無下拉選單、無路由）
   - 點擊無反應是預期行為，因為尚未實作選單及資料串接
   - category_routes.py 已建立骨架，可正常擴充

測試結論：
目前網站的會員系統（註冊 / 登入 / 登出）已完整運作；
首頁與所有前端頁面皆能渲染；
Blueprint 與所有 endpoint 均已修正、無 BuildError。
下一階段將可順利進入文章系統（Step 5-1）。


[2025-12-10]
完成 Step 5-1（前置）：新增文章頁的權限控管

- 在 post_routes.new_post 中加入 role 檢查
- 只有 role == "admin" 的使用者可以使用 /new_post
- 非管理者使用者訪問該頁時，正確回傳 403 Forbidden
- 前端表現正常：顯示「只有管理者能發文」訊息
- Session 驗證、redirect 流程運作如預期，網站權限邏輯正式生效
- 此結果確認登入系統與 Session 管理成功整合，準備進入文章發佈主功能（寫入 DB）

此階段完成後，LumenFilm 已具備最基本的權限管理，
確保後續文章建立功能只會由管理者觸發。


[2025-12-10]
完成 Step 5-1：post_routes.py 完整整合（首頁、單篇、分類、發文）

- 整合並完成 post_routes.py 全部後端路由：
    • /               → 首頁文章列表
    • /post/<id>      → 單篇文章頁（可顯示真實資料）
    • /new_post       → 新增文章（限 Admin）
    • /category/<name>→ 分類頁顯示文章

- 新增 redirect 所需的 post_detail 路由，使新增文章能正確導向文章內容頁
- 將 create_post 的參數全面對齊整合後的 PostModel：
      author_id       → 與 DB 使用者欄位一致
      cover_image_url → 配合資料庫欄位名稱
- 新增 title / content 驗證，避免空文章寫入資料庫
- new_post 的 GET/POST 流程完整串接資料庫 categories，前端選單可動態生成
- 若非 admin 進入 new_post → 正確回傳 403 Forbidden（權限系統正式生效）
- 單篇頁與分類頁已有 404 錯誤處理，網站容錯性提升

此階段完成後，LumenFilm 已具備：
    1. 寫入文章到 DB 的完整流程
    2. 發文 → 自動跳轉到文章頁
    3. 前台首頁 / 分類頁 / 單篇頁可顯示真實文章資料

網站目前從「純前端」正式進入「可更新內容的部落格」狀態，
準備開始 Step 5-2：讓前端模板渲染真實文章內容。


[2025-12-10]
完成 Step 5-2：首頁讀取文章列表（資料庫串接）

- 更新 post_routes.home，正式以 PostModel.get_all_posts() 取得資料庫文章列表
- index.html 從原本的假資料改為 Jinja2 迴圈渲染真實文章：
      • 標題
      • 分類名稱（JOIN categories）
      • 發布日期 created_at
      • 內容摘要（前 80 字）
- 首頁文章卡片可點擊導向 /post/<id>（搭配 post_detail 路由完成）
- app.py 已改為使用 Blueprint 的首頁，確保資料從 DB 載入而非固定模板
- 當資料庫尚無文章時，首頁顯示「目前尚無文章」提示，避免空畫面
- 首頁所有樣式（Hero / Card / Title / Meta）完全沿用設計系統，風格一致

此階段完成後，LumenFilm 的首頁正式從「假資料階段」進入「真實內容呈現」階段，
文章發佈 → 首頁列表 → 單篇內容 的整個部落格流程已完整閉合。