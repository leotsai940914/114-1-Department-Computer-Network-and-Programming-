<!doctype html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8" />

    <!-- 動態站名（後台可改） -->
    <title>{{ settings.site_title or "LumenFilm" }}｜{{ settings.subtitle or "電影觀影筆記與影像解析" }}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- 字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- 主 CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>


<!-- =============================
     NAVBAR
============================== -->
<header class="site-header">
    <div class="container nav-container">

        <!-- 動態網站名稱（後台可編輯） -->
        <div class="logo">
            <a href="{{ url_for('index') }}">
                {{ settings.site_title or "LumenFilm" }}
            </a>
        </div>

        <button class="burger-toggle" aria-label="Toggle navigation">☰</button>
        <button class="theme-toggle" aria-label="Toggle theme">☾</button>

        <nav class="nav-links">
            <a href="{{ url_for('index') }}">Home</a>

            <!-- Categories -->
            <div class="dropdown">
                <a class="dropdown-toggle">Categories ▼</a>
                <div class="dropdown-menu">
                    {% if nav_categories %}
                        {% for cat in nav_categories %}
                            <a href="{{ url_for('category_routes.category_page', name=cat['name']) }}">{{ cat['name'] }}</a>
                        {% endfor %}
                    {% else %}
                        <span style="display:block;padding:0.6rem 1rem;color:#888;">尚無分類</span>
                    {% endif %}
                </div>
            </div>

            <!-- 動態 About 頁 -->
            <a href="{{ url_for('category_routes.about') }}">About</a>

            {% if session.get('user_id') %}
                <a href="{{ url_for('post_routes.new_post') }}">New Post</a>
                <a href="{{ url_for('auth_routes.logout') }}">Logout</a>
            {% else %}
                <a href="{{ url_for('auth_routes.login') }}">Login</a>
                <a href="{{ url_for('auth_routes.register') }}">Register</a>
            {% endif %}

            <a href="{{ url_for('post_routes.authors_index') }}">Authors</a>

            {% if session.get('role') == 'admin' %}
                <div class="admin-menu">
                    <button class="admin-toggle">☰</button>
                    <div class="admin-dropdown">
                        <a href="{{ url_for('admin_routes.admin_home') }}">Admin</a>
                        <a href="{{ url_for('admin_routes.admin_settings') }}">Settings</a>
                    </div>
                </div>
            {% endif %}
        </nav>

    </div>
</header>

<div id="navOverlay"></div>


<!-- =============================
     MAIN CONTENT
============================== -->
<main class="container main-content">
    {% block content %}
    {% endblock %}
</main>


<!-- =============================
     FOOTER（動態）
============================== -->
<footer class="site-footer">
    <div class="container footer-content">
        <p class="footer-text">
            {{ settings.footer_text or "寫下每一部電影留給我們的影像與思考" }}<br>
            © {{ settings.site_title or "LumenFilm" }} 2025
        </p>
    </div>
</footer>


<!-- =============================
     SCRIPTS
============================== -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

<!-- Lightbox Overlay -->
<div id="lightboxOverlay">
    <img id="lightboxImage" src="">
</div>

</body>
</html>
